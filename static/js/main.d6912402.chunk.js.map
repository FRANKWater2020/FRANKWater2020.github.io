{"version":3,"sources":["assets/img/01_Introduction.jpg","assets/img/frankWaterLogo.png","assets/img/12_Conclusion-crop.jpg","assets/img/map-markers sync /^/.*$","assets/img/map-markers/completed-marker.svg","assets/img/map-markers/globe-complete.svg","assets/img/map-markers/globe.svg","assets/img/map-markers/house-complete.svg","assets/img/map-markers/house.svg","assets/img/map-markers/marker.svg","assets/img/map-markers/pipe-complete.svg","assets/img/map-markers/pipe.svg","assets/img/map-markers/tap-complete.svg","assets/img/map-markers/tap.svg","assets/img/map-markers/thermometer-complete.svg","assets/img/map-markers/thermometer.svg","assets/img/map-markers/umbrella-complete.svg","assets/img/map-markers/umbrella.svg","assets/img/map-markers/wash-hands-complete.svg","assets/img/map-markers/wash-hands.svg","assets/img/map-markers/water-tower-complete.svg","assets/img/map-markers/water-tower.svg","assets/img/case-studies sync /^/.*$","assets/img/case-studies/03_Global_case_study_2.jpg","assets/img/case-studies/04_Global_case_study_3.jpg","assets/img/case-studies/05_India_case_study.jpeg","assets/img/case-studies/06_Nepal_case_study.jpg","assets/img/case-studies/08_South_Africa_case_study.jpg","assets/img/case-studies/annual-rainfall-uk.png","assets/img/case-studies/increasing-awareness.png","assets/img/case-studies/unsplash-dam.jpg","assets/img/case-studies/water-leakage-chart.png","assets/img/case-studies/water-scarcity-map.png","assets/img/case-studies/water-use-california.png","const/index.js","store/screenSlice.js","components/shared/Stack.js","components/shared/ArrowButton.js","const/markerImgContext.js","components/Home/index.js","components/shared/BackButton.js","data/answers.js","data/caseStudies.js","utils/checkAnswer.js","store/userResponsesSlice.js","utils/checkCaseStudyCompletion.js","components/CaseStudy/components/Question.js","const/caseStudyImgContext.js","assets/img/RainCloud.svg","components/shared/WaterMeter.js","components/shared/Layout.js","components/CaseStudy/index.js","components/GlobalStep/index.js","components/Map/index.js","components/shared/Page.js","components/Score/index.js","components/App.js","store/index.js","theme.js","AppProviders.js","serviceWorker.js","index.js"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","SCREEN_TYPES","MEDIA_TYPES","USER_RESPONSE_TYPES","DATA_SOURCE_TYPES","screenSlice","createSlice","name","initialState","screenType","screenProps","reducers","setScreen","state","action","payload","actions","selectScreen","screen","Stack","props","css","Icon","stroke","rest","viewBox","transform","fill","width","height","clipPath","strokeWidth","d","points","ArrowButton","color","children","theme","MARKER_IMG_CONTEXT","require","Wrapper","borderRadius","FlexItem","Heading","colors","frankBlueDark","white","Scrollable","ContentInner","Actions","Home","dispatch","useDispatch","useTheme","src","introImage","alt","onClick","BackButton","byId","1","mapInfo","coordinates","markerImgs","regular","completed","zoom","title","backgroundText","media","type","filename","dataSource","value","questions","text","responses","2","3","4","5","6","7","8","9","10","ids","checkSingleAnswer","userResponse","answer","checkMultipleAnswer","length","i","partialAnswer","indexOf","defaultValues","CASE_STUDIES","reduce","memo","forEach","question","userResponsesSlice","setUserResponse","response","selectUserResponses","userResponses","selectAnsweredQuestions","createSelector","entries","questionId","selectCurrentScore","answeredQuestions","ANSWERS","Array","isArray","selectCompletedCaseStudies","caseStudyId","questionIds","hasOwnProperty","checkCaseStudyCompletion","selectQuizCompletionStatus","completedCaseStudies","selectWaterMeterFillPercentage","currentScore","frankBlueLight","Label","bg","changeHandlers","target","current","filter","responseValidators","match","Question","buttonHandler","backHandler","buttonText","questionNum","next","previous","previousCaseStudy","isLastQuestion","endAction","stepIndex","useState","setResponse","useSelector","inputType","handleChange","nextValue","handler","validateResponse","label","onSubmit","preventDefault","success","error","key","onChange","disabled","CASE_STUDY_IMG_CONTEXT","_extends","assign","arguments","source","prototype","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","className","_ref","svgRef","ref","undefined","ForwardRef","forwardRef","BarOuter","BarInner","fillPercentage","MeterMarking","WaterMeter","style","display","Header","Content","Layout","header","left","right","wrapperStyle","CaseStudy","questionIdx","setQuestionIdx","caseStudy","currentQuestion","backgroundColor","dataSourceEl","href","rel","STEPS","slice","GlobalStep","setStepIndex","step","isLastStep","console","log","Prompt","MapIcon","L","extend","options","iconSize","iconAnchor","LOCALISED_CASE_STUDY_IDS","initialBounds","geoJson","features","geometry","bbox","getInitialBounds","mapRef","createRef","Map","selectedCaseStudy","setSelectedCaseStudy","bounds","boundsOptions","maxZoom","dragging","zoomControl","scrollWheelZoom","doubleClickZoom","keyboard","useFlyTo","onzoomend","getBounds","setTimeout","TileLayer","url","attribution","markerImg","Marker","leafletElement","flyTo","handleClick","position","icon","iconUrl","Page","frankWaterLogo","Score","userScore","border","overflow","conclusionPhoto","screens","Fallback","App","ScreenComponent","store","configureStore","reducer","screenReducer","userResponsesReducer","AppProviders","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.d6912402.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/01_Introduction.0ac2afcb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/frankWaterLogo.2b11af54.png\";","module.exports = __webpack_public_path__ + \"static/media/12_Conclusion-crop.8a9846ff.jpg\";","var map = {\n\t\"./completed-marker.svg\": 413,\n\t\"./globe-complete.svg\": 414,\n\t\"./globe.svg\": 415,\n\t\"./house-complete.svg\": 416,\n\t\"./house.svg\": 417,\n\t\"./marker.svg\": 418,\n\t\"./pipe-complete.svg\": 419,\n\t\"./pipe.svg\": 420,\n\t\"./tap-complete.svg\": 421,\n\t\"./tap.svg\": 422,\n\t\"./thermometer-complete.svg\": 423,\n\t\"./thermometer.svg\": 424,\n\t\"./umbrella-complete.svg\": 425,\n\t\"./umbrella.svg\": 426,\n\t\"./wash-hands-complete.svg\": 427,\n\t\"./wash-hands.svg\": 428,\n\t\"./water-tower-complete.svg\": 429,\n\t\"./water-tower.svg\": 430\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 412;","module.exports = __webpack_public_path__ + \"static/media/completed-marker.36c18b44.svg\";","module.exports = __webpack_public_path__ + \"static/media/globe-complete.146e723f.svg\";","module.exports = __webpack_public_path__ + \"static/media/globe.8bc6b332.svg\";","module.exports = __webpack_public_path__ + \"static/media/house-complete.306daf4e.svg\";","module.exports = __webpack_public_path__ + \"static/media/house.1f4943e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/marker.fd07e946.svg\";","module.exports = __webpack_public_path__ + \"static/media/pipe-complete.a57f44c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/pipe.cee4474e.svg\";","module.exports = __webpack_public_path__ + \"static/media/tap-complete.e980b4f1.svg\";","module.exports = __webpack_public_path__ + \"static/media/tap.c2667d01.svg\";","module.exports = __webpack_public_path__ + \"static/media/thermometer-complete.16201932.svg\";","module.exports = __webpack_public_path__ + \"static/media/thermometer.6520eeda.svg\";","module.exports = __webpack_public_path__ + \"static/media/umbrella-complete.dfe2b9a7.svg\";","module.exports = __webpack_public_path__ + \"static/media/umbrella.1d1e87f5.svg\";","module.exports = __webpack_public_path__ + \"static/media/wash-hands-complete.11f14312.svg\";","module.exports = __webpack_public_path__ + \"static/media/wash-hands.c7f51ae4.svg\";","module.exports = __webpack_public_path__ + \"static/media/water-tower-complete.5dff52d5.svg\";","module.exports = __webpack_public_path__ + \"static/media/water-tower.c1db53cf.svg\";","var map = {\n\t\"./03_Global_case_study_2.jpg\": 432,\n\t\"./04_Global_case_study_3.jpg\": 433,\n\t\"./05_India_case_study.jpeg\": 434,\n\t\"./06_Nepal_case_study.jpg\": 435,\n\t\"./08_South_Africa_case_study.jpg\": 436,\n\t\"./annual-rainfall-uk.png\": 437,\n\t\"./increasing-awareness.png\": 438,\n\t\"./unsplash-dam.jpg\": 439,\n\t\"./water-leakage-chart.png\": 440,\n\t\"./water-scarcity-map.png\": 441,\n\t\"./water-use-california.png\": 442\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 431;","module.exports = __webpack_public_path__ + \"static/media/03_Global_case_study_2.560aa36a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/04_Global_case_study_3.277bc330.jpg\";","module.exports = __webpack_public_path__ + \"static/media/05_India_case_study.a04983fb.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/06_Nepal_case_study.9edb9a86.jpg\";","module.exports = __webpack_public_path__ + \"static/media/08_South_Africa_case_study.9f06b0fd.jpg\";","module.exports = __webpack_public_path__ + \"static/media/annual-rainfall-uk.796f77f8.png\";","module.exports = __webpack_public_path__ + \"static/media/increasing-awareness.f94914bb.png\";","module.exports = __webpack_public_path__ + \"static/media/unsplash-dam.dc7c773d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/water-leakage-chart.43aa3353.png\";","module.exports = __webpack_public_path__ + \"static/media/water-scarcity-map.b8453388.png\";","module.exports = __webpack_public_path__ + \"static/media/water-use-california.09372189.png\";","export const SCREEN_TYPES = {\r\n  home: 'home',\r\n  globalStep: 'globalStep',\r\n  map: 'map',\r\n  caseStudy: 'caseStudy',\r\n  score: 'score'\r\n};\r\n\r\nexport const MEDIA_TYPES = {\r\n  image: 'image',\r\n  videoEmbed: 'videoEmbed'\r\n};\r\n\r\nexport const USER_RESPONSE_TYPES = {\r\n  single: 'single',\r\n  multiple: 'multiple'\r\n};\r\n\r\nexport const DATA_SOURCE_TYPES = {\r\n  link: 'link',\r\n  text: 'text'\r\n};\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nimport { SCREEN_TYPES } from '../const';\r\n\r\nconst screenSlice = createSlice({\r\n  name: 'screen',\r\n  initialState: {\r\n    screenType: SCREEN_TYPES.home,\r\n    screenProps: {}\r\n  },\r\n  reducers: {\r\n    setScreen(state, action) {\r\n      const { screenType, screenProps = {} } = action.payload;\r\n      return {\r\n        screenType,\r\n        screenProps\r\n      };\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setScreen } = screenSlice.actions;\r\n\r\nexport const selectScreen = state => state.screen;\r\n\r\nexport default screenSlice.reducer;\r\n","/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core';\r\n\r\nconst Stack = props => (\r\n  <div\r\n    css={css`\r\n      > * + * {\r\n        margin-top: 1rem;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nexport default Stack;\r\n","/** @jsx jsx */\r\nimport React from 'react';\r\nimport { css, jsx } from '@emotion/core';\r\n\r\nconst Icon = ({ stroke, ...rest }) => (\r\n  <svg viewBox=\"0 0 20.09 20.09\" {...rest}>\r\n    <defs>\r\n      <clipPath id=\"clip-path\" transform=\"translate(0 0)\">\r\n        <rect fill=\"none\" width=\"20.09\" height=\"20.09\" />\r\n      </clipPath>\r\n    </defs>\r\n    <g>\r\n      <g>\r\n        <g clipPath=\"url(#clip-path)\">\r\n          <path\r\n            stroke={stroke}\r\n            strokeWidth=\"0.8px\"\r\n            fill=\"none\"\r\n            d=\"M10.05,19.69A9.65,9.65,0,1,0,.4,10.05,9.65,9.65,0,0,0,10.05,19.69Z\"\r\n            transform=\"translate(0 0)\"\r\n          />\r\n        </g>\r\n\r\n        <polyline\r\n          stroke={stroke}\r\n          strokeWidth=\"0.8px\"\r\n          fill=\"none\"\r\n          points=\"7.64 4.69 13.03 10.05 7.64 15.4\"\r\n        />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst ArrowButton = ({ color, children, ...rest }) => (\r\n  <button\r\n    css={theme => css`\r\n      border: none;\r\n      background: none;\r\n      font-size: 1.25rem;\r\n      color: ${color || 'currentColor'};\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      max-width: 170px; /* IE 11 */\r\n\r\n      svg {\r\n        display: block;\r\n        margin-left: 0.5rem;\r\n        fill: currentColor;\r\n      }\r\n    `}\r\n    {...rest}\r\n  >\r\n    {children}\r\n\r\n    <Icon height=\"1rem\" width=\"1rem\" stroke=\"currentColor\" />\r\n  </button>\r\n);\r\n\r\nexport default ArrowButton;\r\n","// Bundle all images in this folder so we can reference them dynamically\r\nexport const MARKER_IMG_CONTEXT = require.context('../assets/img/map-markers');\r\n","/** @jsx jsx */\r\nimport React from 'react';\r\nimport { css, jsx } from '@emotion/core';\r\nimport { useTheme } from 'emotion-theming';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { setScreen } from '../../store/screenSlice';\r\nimport Stack from '../shared/Stack';\r\nimport ArrowButton from '../shared/ArrowButton';\r\nimport { SCREEN_TYPES } from '../../const';\r\nimport { MARKER_IMG_CONTEXT } from '../../const/markerImgContext';\r\nimport introImage from '../../assets/img/01_Introduction.jpg';\r\n\r\nconst Wrapper = props => (\r\n  <div\r\n    css={theme => css`\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      height: 100%;\r\n      border: 1px solid grey;\r\n      border-radius: ${theme.borderRadius}px;\r\n      padding: 1rem;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst FlexItem = props => (\r\n  <div\r\n    css={theme => css`\r\n      position: relative;\r\n      flex: 1;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Heading = props => (\r\n  <h2\r\n    css={theme => css`\r\n      padding: 2rem 1rem;\r\n      background-color: ${theme.colors.frankBlueDark};\r\n      color: ${theme.colors.white};\r\n      /* margin-left: -1rem;  doesn't work because of scrollable, fix */\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Scrollable = props => (\r\n  <div\r\n    css={css`\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      overflow-y: auto;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst ContentInner = props => (\r\n  <div\r\n    css={css`\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      display: flex;\r\n\r\n      > * + * {\r\n        margin-left: 1rem;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Actions = props => (\r\n  <div\r\n    css={css`\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: flex-end;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n  const theme = useTheme();\r\n  const handleClick = e => {\r\n    dispatch(setScreen({ screenType: SCREEN_TYPES.globalStep }));\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Stack\r\n        css={css`\r\n          display: flex;\r\n          flex-direction: column;\r\n          height: 100%;\r\n        `}\r\n      >\r\n        <div\r\n          css={css`\r\n            display: flex;\r\n            flex: 1;\r\n            justify-content: space-between;\r\n            width: 100%;\r\n            position: relative;\r\n          `}\r\n        >\r\n          <ContentInner>\r\n            <FlexItem>\r\n              <Scrollable>\r\n                <Stack>\r\n                  <Heading>\r\n                    Welcome to Water for the World - Frank Water's interactive\r\n                    quiz on Water, Sanitation and Hygiene\r\n                  </Heading>\r\n\r\n                  <p>\r\n                    Welcome to Frank Water's interactive quiz on Water, Sanitation and Hygiene (WASH).\r\n                    This quiz aims to test your knowledge of worldwide water issues \r\n                    and to highlight the way in which Frank Water works to improve water security for some of the poorest people in the world.\r\n                    These questions have been designed to align with GCSE Geography syllabuses on water resource management. \r\n                  </p>\r\n\r\n                  <p>\r\n                    The global water crisis affects millions of people across\r\n                    the world, leaving them without access to a safe,\r\n                    sustainable water supply; decent toilets and good hygiene.\r\n                  </p>\r\n\r\n                  <p>\r\n                    Frank Water is a charity that works towards a water-secure\r\n                    world in which everyone has equal access to a safe, secure\r\n                    water supply.\r\n                  </p>\r\n                    \r\n                  <p>\r\n                    Frank Water works with communities to:\r\n                  </p>\r\n\r\n                  <ul>\r\n                    <li>\r\n                      Help improve the capture, storage and use of water\r\n                      available; and\r\n                    </li>\r\n                    <li>\r\n                      Ensure that the volume of water extracted is equal to or\r\n                      less than the amount in the immediate environment or\r\n                      watershed.\r\n                    </li>\r\n                  </ul>\r\n\r\n                  <p>\r\n                    This quiz gives examples of how this works in practice. With\r\n                    every correct answer the water level will rise, reflecting\r\n                    improvements to the groundwater supply. Get a question wrong\r\n                    and you risk the water supply running dry.\r\n                  </p>\r\n\r\n                  <p>\r\n                    <strong>\r\n                      Answer the questions to try and achieve a water-secure future.\r\n                    </strong>\r\n                  </p>\r\n                </Stack>\r\n              </Scrollable>\r\n            </FlexItem>\r\n            <div css={css `width: 50%;`}>\r\n            <img\r\n              css={css`\r\n                height: 95%;\r\n                width: 100%;\r\n                display: block;\r\n              `}\r\n              src={introImage}\r\n              alt=\"Volunteers supporting FRANK Water's work in UK with fun and interactive workshop\"\r\n            />\r\n            <p\r\n              css={css`\r\n                font-size: 0.875rem;\r\n              `}\r\n            >\r\n              <em>Source: Frank Water</em>\r\n            </p>\r\n          </div>\r\n          </ContentInner>\r\n        </div>\r\n\r\n        <div\r\n          css={css`\r\n            width: 100%;\r\n            height: 60px;\r\n            position: relative;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-around;\r\n\r\n            img {\r\n              display: block;\r\n              height: 80%;\r\n            }\r\n          `}\r\n        >\r\n          <img src={MARKER_IMG_CONTEXT('./pipe.svg')} alt=\"Pipe icon\" />\r\n          <img src={MARKER_IMG_CONTEXT('./umbrella.svg')} alt=\"Umbrella icon\" />\r\n          <img\r\n            src={MARKER_IMG_CONTEXT('./wash-hands.svg')}\r\n            alt=\"Washing hands icon\"\r\n          />\r\n          <img\r\n            src={MARKER_IMG_CONTEXT('./thermometer.svg')}\r\n            alt=\"Thermometer icon\"\r\n          />\r\n          <img src={MARKER_IMG_CONTEXT('./house.svg')} alt=\"House icon\" />\r\n          <img src={MARKER_IMG_CONTEXT('./tap.svg')} alt=\"Tap icon\" />\r\n          <img\r\n            src={MARKER_IMG_CONTEXT('./water-tower.svg')}\r\n            alt=\"Water tower icon\"\r\n          />\r\n          <img src={MARKER_IMG_CONTEXT('./globe.svg')} alt=\"Globe icon\" />\r\n        </div>\r\n\r\n        <Actions>\r\n          <ArrowButton color={theme.colors.frankBlueDark} onClick={handleClick}>\r\n            Start Quiz\r\n          </ArrowButton>\r\n        </Actions>\r\n      </Stack>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","/** @jsx jsx */\r\nimport React from 'react';\r\nimport { css, jsx } from '@emotion/core';\r\n\r\nconst Icon = ({ stroke, ...rest }) => (\r\n  <svg viewBox=\"0 0 20.09 20.09\" {...rest}>\r\n    <defs>\r\n      <clipPath id=\"clip-path\" transform=\"translate(0 0)\">\r\n        <rect fill=\"none\" width=\"20.09\" height=\"20.09\" />\r\n      </clipPath>\r\n    </defs>\r\n    <g>\r\n      <g>\r\n        <g clipPath=\"url(#clip-path)\">\r\n          <path\r\n            stroke={stroke}\r\n            strokeWidth=\"0.8px\"\r\n            fill=\"none\"\r\n            d=\"M10.05,19.69A9.65,9.65,0,1,0,.4,10.05,9.65,9.65,0,0,0,10.05,19.69Z\"\r\n            transform=\"translate(0 0)\"\r\n          />\r\n        </g>\r\n\r\n        <polyline\r\n          stroke={stroke}\r\n          strokeWidth=\"0.8px\"\r\n          fill=\"none\"\r\n          points=\"7.64 4.69 1.03 10.05 7.64 15.4\"\r\n          transform=\"translate(5 0)\"\r\n        />\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst BackButton = ({ color, children, ...rest }) => (\r\n  <button\r\n    css={theme => css`\r\n      border: none;\r\n      background: none;\r\n      font-size: 1.25rem;\r\n      color: ${color || 'currentColor'};\r\n      cursor: pointer;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      max-width: 250px; /* IE 11 */\r\n\r\n      svg {\r\n        display: block;\r\n        margin-right: 0.5rem;\r\n        fill: currentColor;\r\n      }\r\n    `}\r\n    {...rest}\r\n  >\r\n    <Icon height=\"1rem\" width=\"1rem\" stroke=\"currentColor\" />\r\n    {children}\r\n\r\n    \r\n  </button>\r\n);\r\n\r\nexport default BackButton;\r\n","export default {\r\n  '1-1': '1-1-2',\r\n  '1-2': ['1-2-1', '1-2-3'],\r\n  '2-1': '2-1-3',\r\n  '2-2': '2-2-2',\r\n  '3-1': ['3-1-1', '3-1-2', '3-1-3', '3-1-4'],\r\n  '3-2': '3-2-2',\r\n  '4-1': ['4-1-1', '4-1-2', '4-1-4'],\r\n  '4-2': ['4-2-2', '4-2-3'],\r\n  '5-1': ['5-1-1', '5-1-2', '5-1-3'],\r\n  '5-2': ['5-2-1', '5-2-2', '5-2-3'],\r\n  '6-1': ['6-1-2', '6-1-4', '6-1-5'],\r\n  '6-2': '6-2-2',\r\n  '7-1': ['7-1-1', '7-1-3'],\r\n  '7-2': ['7-2-2', '7-2-3', '7-2-4'],\r\n  '8-1': '8-1-2',\r\n  '8-2': '8-2-1',\r\n  '9-1': '9-1-2',\r\n  '9-2': '9-2-2',\r\n  '10-1': '10-1-3',\r\n  '10-2': ['10-2-1', '10-2-2']\r\n};\r\n","import React from 'react';\r\nimport { MEDIA_TYPES, USER_RESPONSE_TYPES, DATA_SOURCE_TYPES } from '../const';\r\n\r\n/*\r\n  TODO:\r\n  - give case studies more meaningful ids (e.g. 'India')\r\n    - will make debugging easier\r\n  - think about ids for questions, probably beneficial for these to match up to the word doc\r\n  - do responses need unique ids as well? if it's just for render keys, only siblings need to be unique\r\n\r\n  cover\r\n  - [x] markers\r\n  - [x] coordinates\r\n  - [x] image\r\n  - [x] video embed\r\n  - [x] single answer\r\n  - [x] multiple answers\r\n  - [x] map zoom info\r\n  - [x] no map zoom info\r\n  - [x] single question in case study\r\n  - [x] multiple questions in case study\r\n*/\r\n\r\nexport default {\r\n  byId: {\r\n    1: {\r\n      id: 1,\r\n      mapInfo: {\r\n        coordinates: [-55.7765730186677, -33.39843750000001],\r\n        markerImgs: {\r\n          regular: 'globe.svg',\r\n          completed: 'globe-complete.svg'\r\n        },\r\n        zoom: null\r\n      },\r\n      title: 'Global water scarcity',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            The distribution of water varies across the world, leading to{' '}\r\n            <strong>water surplus</strong> in some regions and{' '}\r\n            <strong>water scarcity</strong> in others. These terms are defined\r\n            below:\r\n          </p>\r\n\r\n          <p>\r\n            <strong>Water surplus:</strong> An area that has more water available than is required is said to have a water surplus. \r\n            Countries along the Equator have high levels of rainfall caused by the moist, warm air in this region. \r\n            Countries with high latitudes (furthest away from the Equator) also have high levels of rainfall. \r\n            Unless the population is large, or suffers from poverty, these countries usually have a water surplus.\r\n          </p>\r\n\r\n          <p>\r\n            <strong>Water scarcity:</strong> An area that has less water available than is required is said to have a water scarcity. \r\n            Countries at a latitude of approximately 30°N and 30°S of the Equator have limited rainfall and cooler drier air so tend to have a water deficit.\r\n          </p>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'World map graphic showing water scarcity',\r\n          filename: 'water-scarcity-map.png',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.link,\r\n            value:\r\n              'http://www.zaragoza.es/ciudad/medioambiente/onu/en/detallePer_Onu?id=71'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '1-1',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'From the map, what continent shows the highest water scarcity?',\r\n          responses: [\r\n            {\r\n              id: '1-1-1',\r\n              text: 'Europe'\r\n            },\r\n            {\r\n              id: '1-1-2',\r\n              text: 'Africa'\r\n            },\r\n            {\r\n              id: '1-1-3',\r\n              text: 'South America'\r\n            },\r\n            {\r\n              id: '1-1-4',\r\n              text: 'Australia'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '1-2',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'Which of these latitudes experience water scarcity? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '1-2-1',\r\n              text: '30˚N of the Equator'\r\n            },\r\n            {\r\n              id: '1-2-2',\r\n              text: 'The Equator'\r\n            },\r\n            {\r\n              id: '1-2-3',\r\n              text: '30˚S of the Equator'\r\n            },\r\n            {\r\n              id: '1-2-4',\r\n              text: '75˚N of the Equator'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    2: {\r\n      id: 2,\r\n      mapInfo: {\r\n        coordinates: [-55.7765730186677, -13.39843750000001],\r\n        markerImgs: {\r\n          regular: 'globe.svg',\r\n          completed: 'globe-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'Natural factors and water security',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            There are several natural factors which affect global water supply:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              <strong>Latitude/climate:</strong> Countries along the Equator have high levels of rainfall caused by the moist, warm air in this region. \r\n              Countries at a latitude of approximately 30°N and 30°S of the Equator have limited rainfall and cooler drier air so tend to have a water deficit.\r\n            </li>\r\n            <li>\r\n              <strong>Terrain:</strong> Mountainous areas receive more rainfall than areas with flat terrain. \r\n              This is because mountains cause airflows to rise and form clouds, which often bring rain.\r\n            </li>\r\n            <li>\r\n              <strong>Rock type:</strong> Water is stored underground in rock formations called aquifers. \r\n              The rock types in an area can influence the amount of water stored. \r\n              If rocks are permeable then water can flow through them and they can store water as aquifers, for example Sandstone. \r\n              Other rocks are impermeable which means they do not store water, but they can stop water getting through them and trap it in the layers above. \r\n            </li>\r\n            <li>\r\n              <strong>Climate change:</strong> Weather patterns are changing across the world due to climate change. \r\n              Global temperatures are rising and rainfall patterns are changing and becoming less predictable across the world. \r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'Mountainous landscape in rural Nepal',\r\n          filename: '03_Global_case_study_2.jpg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Frank Water'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '2-1',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'Which of these combinations is the most likely to encourage water availability?',\r\n          responses: [\r\n            {\r\n              id: '2-1-1',\r\n              text: 'Near equator, flat terrain which consists of mostly impermeable rock'\r\n            },\r\n            {\r\n              id: '2-1-2',\r\n              text: 'Near equator, mountainous terrain which consists of mostly impermeable rock'\r\n            },\r\n            {\r\n              id: '2-1-3',\r\n              text: 'Near equator, mountainous terrain which consists of mostly permeable rock'\r\n            },\r\n            {\r\n              id: '2-1-4',\r\n              text: 'Far from equator, mountainous terrain which consists of mostly permeable rock '\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '2-2',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text: 'Which types of rock store water?',\r\n          responses: [\r\n            {\r\n              id: '2-2-1',\r\n              text: 'Impermeable'\r\n            },\r\n            {\r\n              id: '2-2-2',\r\n              text: 'Permeable'\r\n            },\r\n            {\r\n              id: '2-2-3',\r\n              text: 'Non-porous'\r\n            },\r\n            {\r\n              id: '2-2-4',\r\n              text: 'Metamorphic rock'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    3: {\r\n      id: 3,\r\n      mapInfo: {\r\n        coordinates: [-55.7765730186677, 7.39843750000001],\r\n        markerImgs: {\r\n          regular: 'globe.svg',\r\n          completed: 'globe-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'Human factors and water security',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            There are several human factors which affect global water security:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              <strong>Water infrastructure:</strong>Dams, reservoirs and pipelines are expensive to install, \r\n              so some countries cannot afford to pay for the infrastructure required to support their populations. \r\n              People in many Low-Income Countries (LICs) often struggle to have reliable access to water.  \r\n            </li>\r\n            <li>\r\n              <strong>Over-abstraction:</strong> Abstraction means taking water from the natural environment, for example from lakes, rivers or aquifers. \r\n              Over-abstraction is taking more water from sources than can be naturally replaced through rainfall. \r\n              This can lower water levels in lakes, rivers and aquifers.\r\n            </li>\r\n            <li>\r\n              <strong>Pollution:</strong> Water can be contaminated by various human activities such as oil spills,\r\n               mining activities, fertilisers, pesticides, sewage and industrial waste.\r\n            </li>\r\n            <li>\r\n              <strong>Industry water use:</strong> Many industries including textiles, \r\n              automotives and farming require huge quantities of water for manufacturing, cooling machinery or cleaning.\r\n            </li>\r\n            <li>\r\n              <strong>Rising population:</strong> As the global population continues to increase, the worldwide demand for water will rise. \r\n            </li>\r\n            <li>\r\n              <strong>Household water use:</strong> High-Income Countries (HICs) \r\n              often have the infrastructure to deliver water directly to homes through pipelines and taps. \r\n              This also increases the use of home appliances like dishwashers and washing machines which use a lot of water. \r\n              Because of this, people in HICs use more water than LICs. \r\n              LICs.\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'Polluted water source in low income country',\r\n          filename: '04_Global_case_study_3.jpg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Frank Water'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '3-1',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'Which human activities can cause water pollution? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '3-1-1',\r\n              text: 'Eating meat'\r\n            },\r\n            {\r\n              id: '3-1-2',\r\n              text: 'Making clothes'\r\n            },\r\n            {\r\n              id: '3-1-3',\r\n              text: 'Driving cars'\r\n            },\r\n            {\r\n              id: '3-1-4',\r\n              text: 'Pest control in farming'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '3-2',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text: 'Which countries have the highest levels of water consumption?',\r\n          responses: [\r\n            {\r\n              id: '3-2-1',\r\n              text: 'Low-Income Countries (LIC)'\r\n            },\r\n            {\r\n              id: '3-2-2',\r\n              text: 'High-Income Countries (HIC)'\r\n            },\r\n            {\r\n              id: '3-2-3',\r\n              text: 'Middle-Income Countries (MIC)'\r\n            },\r\n            {\r\n              id: '3-2-4',\r\n              text: 'Less Economically Developed Countries (LEDC)'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    4: {\r\n      id: 4,\r\n      mapInfo: {\r\n        coordinates: [22.973423, 78.656891],\r\n        markerImgs: {\r\n          regular: 'wash-hands.svg',\r\n          completed: 'wash-hands-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'Madhya Pradesh, India',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            In rural India, much of the drinking water comes from groundwater. \r\n            In parts of Madhya Pradesh, a State in India, the groundwater may be polluted with high concentrations of fluoride and/or faecal matter from human or animals. \r\n            Fluoride is a naturally occurring mineral that leaches into groundwater. \r\n            If consumed in high quantities, it can lead to a disease called Fluorosis that damages teeth and bones. \r\n            Disease-causing organisms (pathogens) in faecal matter can cause water-borne diseases such as diarrhoea and dysentery, if consumed. \r\n            Until recently, open defecation was common among rural communities, increasing the risk of contamination and disease. \r\n          </p>\r\n\r\n          <p>\r\n            Frank Water helped reduce water-borne disease in rural villages in Madhya Pradesh by encouraging groundwater recharge\r\n            to increase water volume and reduce levels of contamination. \r\n            They also supported the communities to implement low-cost technologies to improve clean water supply, including:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              Installing rainwater harvesting systems (collecting and storing\r\n              rainfall for human use);\r\n            </li>\r\n            <li>Boxes to protect spring sources from contamination; and</li>\r\n            <li>Making ponds deeper to capture more rainwater.</li>\r\n          </ul>\r\n\r\n          <p>\r\n            Frank Water delivered hygiene and handwashing workshops to increase awareness\r\n            of the risks created by open defecation and supported the communities to secure government funding to build toilets, \r\n            further reducing the risk of disease.\r\n          </p>\r\n\r\n          <p>In 2019, the project achieved the following:</p>\r\n\r\n          <ul>\r\n            <li>\r\n              Reduced levels of fluoride in drinking water in four villages, benefiting 1,532 people\r\n            </li>\r\n            <li>\r\n              Submitted 450 applications for funding from the Indian government to build toilets\r\n            </li>\r\n            <li>\r\n              Enabled 625 people to regularly wash their hands with soap and water\r\n            </li>\r\n            <li>\r\n              Encouraged families to store their drinking water and food in covered containers\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt:\r\n            'Rainwater capture mechanism on rooftop with underground storage tank',\r\n          filename: '05_India_case_study.jpeg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Frank Water'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '4-1',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What low-cost technologies could be implemented in developing countries facing water scarcity? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '4-1-1',\r\n              text: 'Rainwater Harvesting'\r\n            },\r\n            {\r\n              id: '4-1-2',\r\n              text: 'Spring management'\r\n            },\r\n            {\r\n              id: '4-1-3',\r\n              text: 'Desalination'\r\n            },\r\n            {\r\n              id: '4-1-4',\r\n              text: 'Increasing capacity of existing ponds'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '4-2',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What diseases are caused by water pollution? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '4-2-1',\r\n              text: 'Tuberculosis'\r\n            },\r\n            {\r\n              id: '4-2-2',\r\n              text: 'Fluorosis'\r\n            },\r\n            {\r\n              id: '4-2-3',\r\n              text: 'Dysentery'\r\n            },\r\n            {\r\n              id: '4-2-4',\r\n              text: 'Hepatitis B'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    5: {\r\n      id: 5,\r\n      mapInfo: {\r\n        coordinates: [27.8407, 85.40521],\r\n        markerImgs: {\r\n          regular: 'house.svg',\r\n          completed: 'house-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'Lalitpur, Nepal',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            In 2015, a huge earthquake struck Nepal, devastating towns and shattering thousands of lives. \r\n            Every house in the remote village of Lakuribhanjyang was destroyed, as well as the pipeline and storage systems that provided the villagers with safe water, \r\n            from a spring at the foot of the mountain.\r\n            With no water supply, women and children were forced to spend many hours each day, walking long distances to collect water. \r\n            They had little time left to go to school or earn a living.\r\n          </p>\r\n          <p>\r\n            Frank Water worked with the community and other Non-Governmental Organisations (NGOs) \r\n            to repair the damaged pipeline and build a replacement water storage tank to distribute safe water to the villagers. \r\n            They introduced water quality testing in the village and set up a local water committee. \r\n            They delivered WASH training to increase awareness of the risks of open defecation and its potential for contaminating water supply.  \r\n            The project achieved the following:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              A new water storage and distribution tank connected 25 households to safe water;\r\n            </li>\r\n            <li>\r\n              WASH training was given to a group of 37 local women and in a school; and\r\n            </li>\r\n            <li>\r\n            The community reported having better knowledge of good hygiene practices and an understanding of how water-borne disease spreads\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt:\r\n            'NGO staff in Nepal explaining importance of sanitation, handwashing, and good hygiene to rural communities',\r\n          filename: '06_Nepal_case_study.jpg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Frank Water'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '5-1',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What challenges can arise when installing water infrastructure in a country similar to Nepal? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '5-1-1',\r\n              text: 'Mountainous terrain'\r\n            },\r\n            {\r\n              id: '5-1-2',\r\n              text: 'Access to funding'\r\n            },\r\n            {\r\n              id: '5-1-3',\r\n              text: 'Lack of toilets'\r\n            },\r\n            {\r\n              id: '5-1-4',\r\n              text: 'Good understanding of hygiene'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '5-2',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What possible impacts can natural disasters, such as earthquakes have on communities? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '5-2-1',\r\n              text: 'Drop in household income'\r\n            },\r\n            {\r\n              id: '5-2-2',\r\n              text: 'Reduced level of education'\r\n            },\r\n            {\r\n              id: '5-2-3',\r\n              text: 'Damaged pipelines can reduce availability of clean water'\r\n            },\r\n            {\r\n              id: '5-2-4',\r\n              text: 'Increased water availability for agriculture'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    6: {\r\n      id: 6,\r\n      mapInfo: {\r\n        coordinates: [36.778259, -119.417931],\r\n        markerImgs: {\r\n          regular: 'thermometer.svg',\r\n          completed: 'thermometer-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'California, USA',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            Since 2011, California, a mostly-desert state in the USA, has\r\n            experienced several droughts due to:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>A decrease in rainfall;</li>\r\n            <li>\r\n              An increase in domestic water use due to a growing population;\r\n            </li>\r\n            <li>\r\n              An increase in agriculture, which has caused over-abstraction of\r\n              water for irrigation from aquifers;\r\n            </li>\r\n            <li>An increase in industrial water use; and</li>\r\n            <li>A rise in average temperature.</li>\r\n          </ul>\r\n\r\n          <p>\r\n            The droughts in recent years have increased in frequency and\r\n            severity. Droughts have caused:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>A drop in the groundwater table and river levels;</li>\r\n            <li>An increase in forest fires;</li>\r\n            <li>Damage to the environment and ecosystems;</li>\r\n            <li>Ground levels falling (subsidence); and</li>\r\n            <li>\r\n              Contamination by sea water into aquifers that provide drinking\r\n              water.\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'Pie chart showing breakdown of water use in California in 2017',\r\n          filename: 'water-use-california.png',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.link,\r\n            value: 'https://www.ppic.org/publication/water-use-in-california/'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '6-1',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What causes water scarcity in California? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '6-1-1',\r\n              text: 'Topography'\r\n            },\r\n            {\r\n              id: '6-1-2',\r\n              text: 'Population Increase'\r\n            },\r\n            {\r\n              id: '6-1-3',\r\n              text: 'Cooler temperatures'\r\n            },\r\n            {\r\n              id: '6-1-4',\r\n              text: 'Lower than average rainfall'\r\n            },\r\n            {\r\n              id: '6-1-5',\r\n              text: 'Demand from agriculture'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '6-2',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'From the pie chart what percentage of water use was agriculture responsible for in California in 2017?',\r\n          responses: [\r\n            {\r\n              id: '6-2-1',\r\n              text: '10%'\r\n            },\r\n            {\r\n              id: '6-2-2',\r\n              text: '40%'\r\n            },\r\n            {\r\n              id: '6-2-3',\r\n              text: '60%'\r\n            },\r\n            {\r\n              id: '6-2-4',\r\n              text: '100%'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    7: {\r\n      id: 7,\r\n      mapInfo: {\r\n        coordinates: [-33.92487, 18.424055],\r\n        markerImgs: {\r\n          regular: 'tap.svg',\r\n          completed: 'tap-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'Cape Town, South Africa',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            In the summer of 2018, Cape Town, South Africa set up over 200 emergency water stations to help residents survive the worst drought in the region in 30 years. \r\n            The drought was caused by fewer days of rainfall than average as well as a decline in the intensity of rainfall, \r\n            resulting in a drop in the water levels in supply reservoirs and rivers. \r\n            The city leaders warned residents that they were increasingly likely to face “Day Zero”, \r\n            the day when the city would be forced to shut off the taps to homes and businesses because the water levels in reservoirs were too low for water to be abstracted. \r\n            The city implemented a range of mitigation measures, such as:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              Banning the filling of swimming pools, washing cars, and use of fountains;\r\n            </li>\r\n            <li>\r\n              Instructing everyone to reduce showering time;\r\n            </li>\r\n            <li>\r\n              Using \"grey water\" to flush toilets;\r\n            </li>\r\n            <li>\r\n              Setting a limit for the water each household could use daily;\r\n            </li>\r\n            <li>\r\n              Installing water management devices (meters), which measured the daily limit of water supply to each property;\r\n            </li>\r\n            <li>\r\n              Heavily fining households using high volumes of water; and\r\n            </li>\r\n            <li>\r\n              Introducing strict limits on agricultural water use for irrigation.\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: \"Aerial view of Lion's Head, Cape Town, South Africa\",\r\n          filename: '08_South_Africa_case_study.jpg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Arup'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '7-1',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'Which of the following are thought to be the causes of the Cape Town drought in 2018? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '7-1-1',\r\n              text: 'Low rainfall'\r\n            },\r\n            {\r\n              id: '7-1-2',\r\n              text: 'Increased rainfall'\r\n            },\r\n            {\r\n              id: '7-1-3',\r\n              text: 'Less intense rainfall'\r\n            },\r\n            {\r\n              id: '7-1-4',\r\n              text: 'Increased tourism'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '7-2',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What can residents do to conserve water during a drought? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '7-2-1',\r\n              text: 'Leave the tap on while brushing teeth'\r\n            },\r\n            {\r\n              id: '7-2-2',\r\n              text: 'Capture and store shower water'\r\n            },\r\n            {\r\n              id: '7-2-3',\r\n              text: 'Use hand sanitiser to clean hands'\r\n            },\r\n            {\r\n              id: '7-2-4',\r\n              text: 'Washing clothes by hand'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    8: {\r\n      id: 8,\r\n      mapInfo: {\r\n        coordinates: [51.507351, -0.127758],\r\n        markerImgs: {\r\n          regular: 'umbrella.svg',\r\n          completed: 'umbrella-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'UK water supply',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            The average amount of rainfall in the UK varies from one region to\r\n            another. This is mainly because of the difference in topography: the\r\n            higher elevations in the north and west of the UK force the\r\n            prevailing winds from the west to rise, which cools the air and\r\n            consequently leads to the formation of clouds which bring rain in\r\n            these locations.\r\n          </p>\r\n\r\n          <p>\r\n            On average the UK is considered to have a water surplus, but this is\r\n            not uniform across the country. The areas with the highest water\r\n            usage and population density (such as London) are in the southeast.\r\n            Whereas the areas in the UK with the highest water availability are\r\n            the north and west. This creates water supply problems especially\r\n            during droughts, when rainfall is less than the average.\r\n            Transferring water from one region with a surplus to another region\r\n            with a deficit is possible, but the water infrastructure required is\r\n            very expensive to build.\r\n          </p>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'Bar chart showing average rainfall by UK region in 2015',\r\n          filename: 'annual-rainfall-uk.png',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.link,\r\n            value: 'https://www.metoffice.gov.uk/hadobs/hadukp/'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '8-1',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'What geographic feature in the UK corresponds with high rainfall?',\r\n          responses: [\r\n            {\r\n              id: '8-1-1',\r\n              text: 'Beaches'\r\n            },\r\n            {\r\n              id: '8-1-2',\r\n              text: 'Mountains'\r\n            },\r\n            {\r\n              id: '8-1-3',\r\n              text: 'Marshland'\r\n            },\r\n            {\r\n              id: '8-1-4',\r\n              text: 'Forest'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '8-2',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'From the bar chart, what was the average recorded rainfall (mm) in the Central region of the UK in 2015?',\r\n          responses: [\r\n            {\r\n              id: '8-2-1',\r\n              text: '600'\r\n            },\r\n            {\r\n              id: '8-2-2',\r\n              text: '6000'\r\n            },\r\n            {\r\n              id: '8-2-3',\r\n              text: '1200'\r\n            },\r\n            {\r\n              id: '8-2-4',\r\n              text: '900'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    9: {\r\n      id: 9,\r\n      mapInfo: {\r\n        coordinates: [55.378052, -3.435973],\r\n        markerImgs: {\r\n          regular: 'water-tower.svg',\r\n          completed: 'water-tower-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'UK water infrastructure',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            To help manage water availability and reduce insecurity in the UK, a\r\n            range of measures are used:\r\n          </p>\r\n\r\n          <ul>\r\n            <li>\r\n              <strong>Reservoirs and dams:</strong> \r\n              Rivers transport water to the sea, but dams block these rivers so that reservoirs of water build up behind them, rather than drain away. \r\n              Reservoirs collect and store the water, \r\n              providing large supplies of drinking water all year round. This reduces water insecurity, especially where rainfall may be seasonal i.e. \r\n              occurring only at certain times of the year. \r\n              However, dams attract criticism from environmental campaigners by interfering with natural movement of aquatic wildlife. \r\n              Dams and reservoirs can also be used to prevent flooding and to generate electricity (hydro-electric power).\r\n            </li>\r\n            <li>\r\n              <strong>Water transfers:</strong> \r\n              When a country has a water surplus in one area and a water deficit in another, \r\n              supplies can be transferred using water transfer schemes. \r\n              In the UK, pipes are used to transport water from the Kielder Reservoir in the North East Region into rivers that flow into Newcastle-upon-Tyne, \r\n              Sunderland and Middlesbrough. \r\n              This enables the rivers to keep minimum levels, even when rainfall is low, \r\n              and still meet domestic and industry water needs in the cities.\r\n            </li>\r\n            <li>\r\n              <strong>Desalination plants:</strong> \r\n              Seawater is not a ready supply of drinking water due to its levels of salt. \r\n              Desalination plants remove the salt (salinity) from seawater to make it safe to drink. \r\n              This could solve many of the world’s water insecurity issues because oceans make up 97% of water on earth, but it is a very expensive process. \r\n              The first desalination plant in the UK was constructed for Thames Water in Beckton, London and cost £250 million to install.\r\n            </li>\r\n          </ul>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt: 'A dam used to contain and restrict the flow of water',\r\n          filename: 'unsplash-dam.jpg',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.text,\r\n            value: 'Splash'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '9-1',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text: 'What is the potential disadvantage of dams?',\r\n          responses: [\r\n            {\r\n              id: '9-1-1',\r\n              text: 'Dams can provide electricity'\r\n            },\r\n            {\r\n              id: '9-1-2',\r\n              text: 'Dams can disrupt the river ecosystem'\r\n            },\r\n            {\r\n              id: '9-1-3',\r\n              text: 'Dams can be used to prevent flooding'\r\n            },\r\n            {\r\n              id: '9-1-4',\r\n              text: 'Dams can be a tourist attraction'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '9-2',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'What part of the UK opened the country’s first desalination plant?',\r\n          responses: [\r\n            {\r\n              id: '9-2-1',\r\n              text: 'Cumbria'\r\n            },\r\n            {\r\n              id: '9-2-2',\r\n              text: 'London'\r\n            },\r\n            {\r\n              id: '9-2-3',\r\n              text: 'Liverpool'\r\n            },\r\n            {\r\n              id: '9-2-4',\r\n              text: 'Aberdeen'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    10: {\r\n      id: 10,\r\n      mapInfo: {\r\n        coordinates: [52.130661, -3.783712],\r\n        markerImgs: {\r\n          regular: 'pipe.svg',\r\n          completed: 'pipe-complete.svg'\r\n        },\r\n        zoom: 9\r\n      },\r\n      title: 'UK water management',\r\n      backgroundText: (\r\n        <>\r\n          <p>\r\n            A growing population and advances in affordable technology means that 98% UK households now have a washing machine and 49% households have a dishwasher. \r\n            However, many of the pipes that make up the UK’s water supply network are over 100 years old, (from the Victorian-era). \r\n            These old iron pipes are in poor condition and no longer properly sealed, which allows water to escape into the ground. \r\n            As our household water use goes up, so does the amount of water that’s lost to leakage. \r\n            In England and Wales approximately 3,000 million litres of water were lost due to leaking pipes every day in 2018.  \r\n            The government body Ofwat is the economic regulator of water and wastewater companies in England and Wales.\r\n          </p>\r\n\r\n          <p>\r\n            Water companies can locate leaks using modern acoustic technology which relies on changes in sound to indicate a change in water level in pipes. \r\n            In England and Wales, the water and sewage companies are responsible for replacing old water supply pipes\r\n            as well as making sure that the water we drink is safe and meets the water quality regulations. \r\n            They also look after sewers which take wastewater from kitchens, bathrooms and toilets in our homes to be treated. \r\n            Customers’ water bills help fund these improvements to manage water resources.\r\n          </p>\r\n        </>\r\n      ),\r\n      media: [\r\n        {\r\n          type: MEDIA_TYPES.image,\r\n          alt:\r\n            'Line chart showing water lost due to leakage in England and Wales (1994-2018)',\r\n          filename: 'water-leakage-chart.png',\r\n          dataSource: {\r\n            type: DATA_SOURCE_TYPES.link,\r\n            value: 'https://www.bbc.co.uk/news/business-45033486'\r\n          }\r\n        }\r\n      ],\r\n      questions: [\r\n        {\r\n          id: '10-1',\r\n          type: USER_RESPONSE_TYPES.single,\r\n          text:\r\n            'An Olympic-sized swimming pool contains approximately 2.5 million litres of water. From the line graph, approximately how many Olympic sized swimming pools leaked in 1994 per day?',\r\n          responses: [\r\n            {\r\n              id: '10-1-1',\r\n              text: '20'\r\n            },\r\n            {\r\n              id: '10-1-2',\r\n              text: '200'\r\n            },\r\n            {\r\n              id: '10-1-3',\r\n              text: '2,000'\r\n            },\r\n            {\r\n              id: '10-1-4',\r\n              text: '20,000'\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id: '10-2',\r\n          type: USER_RESPONSE_TYPES.multiple,\r\n          text:\r\n            'What are the reasons for high water usage in the UK? (Please tick all that apply)',\r\n          responses: [\r\n            {\r\n              id: '10-2-1',\r\n              text: 'Leaking pipes'\r\n            },\r\n            {\r\n              id: '10-2-2',\r\n              text:\r\n                'Large number of domestic appliances, such as dishwashers and washing machines'\r\n            },\r\n            {\r\n              id: '10-2-3',\r\n              text: 'Low levels of rainfall'\r\n            },\r\n            {\r\n              id: '10-2-4',\r\n              text: 'Flat terrain'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  ids: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n};\r\n","export const checkSingleAnswer = (userResponse, answer) =>\r\n  userResponse === answer;\r\n\r\nexport const checkMultipleAnswer = (userResponse, answer) => {\r\n  if (userResponse.length !== answer.length) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < userResponse.length; i++) {\r\n    const partialAnswer = userResponse[i];\r\n\r\n    if (answer.indexOf(partialAnswer) === -1) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n","import { createSlice, createSelector } from '@reduxjs/toolkit';\r\n\r\nimport CASE_STUDIES from '../data/caseStudies';\r\nimport ANSWERS from '../data/answers';\r\nimport { checkSingleAnswer, checkMultipleAnswer } from '../utils/checkAnswer';\r\nimport { checkCaseStudyCompletion } from '../utils/checkCaseStudyCompletion';\r\n\r\n// Grab all question ids and add them to an object with a default value of null\r\nconst defaultValues = CASE_STUDIES.ids.reduce((memo, id) => {\r\n  const { questions } = CASE_STUDIES.byId[id];\r\n\r\n  questions.forEach(question => {\r\n    memo[question.id] = null;\r\n  });\r\n\r\n  return memo;\r\n}, {});\r\n\r\nconst userResponsesSlice = createSlice({\r\n  name: 'userResponses',\r\n  initialState: defaultValues,\r\n  reducers: {\r\n    setUserResponse(state, action) {\r\n      const { id, response } = action.payload;\r\n      state[id] = response;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setUserResponse } = userResponsesSlice.actions;\r\n\r\nexport const selectUserResponses = state => state.userResponses;\r\n\r\nexport const selectAnsweredQuestions = createSelector(\r\n  selectUserResponses,\r\n  userResponses => {\r\n    return Object.entries(userResponses).reduce(\r\n      (memo, [questionId, userResponse]) => {\r\n        if (userResponse !== null) {\r\n          memo[questionId] = userResponse;\r\n        }\r\n\r\n        return memo;\r\n      },\r\n      {}\r\n    );\r\n  }\r\n);\r\n\r\nexport const selectCurrentScore = createSelector(\r\n  selectAnsweredQuestions,\r\n  answeredQuestions => {\r\n    return Object.entries(answeredQuestions).reduce(\r\n      (memo, [questionId, userResponse]) => {\r\n        // TODO: should we be doing this check by question type instead? perhaps more legible\r\n        // this will be easier if we normalise question data...\r\n        // would then have an answer validator for each type of question (only 2 atm)\r\n        const answer = ANSWERS[questionId];\r\n        const checkAnswer = Array.isArray(answer)\r\n          ? checkMultipleAnswer\r\n          : checkSingleAnswer;\r\n\r\n        if (checkAnswer(userResponse, answer)) {\r\n          memo += 1;\r\n        }\r\n\r\n        return memo;\r\n      },\r\n      0\r\n    );\r\n  }\r\n);\r\n\r\nexport const selectCompletedCaseStudies = createSelector(\r\n  selectAnsweredQuestions,\r\n  answeredQuestions => {\r\n    return CASE_STUDIES.ids.reduce((memo, caseStudyId) => {\r\n      const caseStudy = CASE_STUDIES.byId[caseStudyId];\r\n      // TODO: this wouldn't be necessary with data normalisation...\r\n      const questionIds = caseStudy.questions.map(question => question.id);\r\n\r\n      if (checkCaseStudyCompletion(questionIds, answeredQuestions)) {\r\n        memo[caseStudyId] = true;\r\n      }\r\n\r\n      return memo;\r\n    }, {});\r\n  }\r\n);\r\n\r\nexport const selectQuizCompletionStatus = createSelector(\r\n  selectCompletedCaseStudies,\r\n  completedCaseStudies => {\r\n    return Object.keys(completedCaseStudies).length === CASE_STUDIES.ids.length;\r\n  }\r\n);\r\n\r\nexport const selectWaterMeterFillPercentage = createSelector(\r\n  selectCurrentScore,\r\n  currentScore => {\r\n    return (currentScore / Object.keys(ANSWERS).length) * 100;\r\n  }\r\n);\r\n\r\nexport default userResponsesSlice.reducer;\r\n","export const checkCaseStudyCompletion = (questionIds, answeredQuestions) => {\r\n  for (let i = 0; i < questionIds.length; i++) {\r\n    const questionId = questionIds[i];\r\n\r\n    if (!answeredQuestions.hasOwnProperty(questionId)) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n","/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTheme } from 'emotion-theming';\r\n\r\nimport Stack from '../../shared/Stack';\r\nimport ArrowButton from '../../shared/ArrowButton';\r\nimport BackButton from '../../shared/BackButton';\r\nimport { USER_RESPONSE_TYPES, SCREEN_TYPES } from '../../../const';\r\nimport ANSWERS from '../../../data/answers';\r\nimport {\r\n  setUserResponse,\r\n  selectUserResponses,\r\n  selectQuizCompletionStatus\r\n} from '../../../store/userResponsesSlice';\r\nimport { setScreen } from '../../../store/screenSlice';\r\n\r\nconst Wrapper = props => (\r\n  <div\r\n    css={theme => css`\r\n      height: 100%;\r\n      background-color: ${theme.colors.frankBlueLight};\r\n      color: ${theme.colors.white};\r\n      padding: 1rem;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Label = props => (\r\n  <label\r\n    css={theme => css`\r\n      display: flex;\r\n      align-items: baseline;\r\n      background-color: ${props.bg};\r\n      padding: 0.5rem;\r\n      border-radius: ${theme.borderRadius}px;\r\n\r\n      input {\r\n        margin-right: 0.5rem;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Actions = props => (\r\n  <div\r\n    css={css`\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: flex-end;\r\n\r\n      > * + * {\r\n        margin-left: 1rem;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\n// This is different to store state\r\n// Store state is always initialised to null so we can\r\n// determine if user has answered/attempted question.\r\nconst initialState = {\r\n  [USER_RESPONSE_TYPES.single]: null,\r\n  [USER_RESPONSE_TYPES.multiple]: []\r\n};\r\n\r\nconst changeHandlers = {\r\n  [USER_RESPONSE_TYPES.single]: e => e.target.value,\r\n  [USER_RESPONSE_TYPES.multiple]: (e, current) => {\r\n    const value = e.target.value;\r\n    const inCurrent = current.indexOf(value) > -1;\r\n\r\n    if (inCurrent) {\r\n      return current.filter(d => d !== value);\r\n    }\r\n\r\n    return [...current, value];\r\n  }\r\n};\r\n\r\n// User these to check if a response is [part of] a matching value\r\nconst responseValidators = {\r\n  [USER_RESPONSE_TYPES.single]: (response, match) => response === match,\r\n  // Check to see if this response is **one of** the valid answers\r\n  [USER_RESPONSE_TYPES.multiple]: (response, match) => {\r\n    return match.indexOf(response) > -1;\r\n  }\r\n};\r\n\r\nconst Question = ({\r\n  question,\r\n  questionNum,\r\n  next,\r\n  previous,\r\n  previousCaseStudy,\r\n  isLastQuestion,\r\n  endAction,\r\n  stepIndex\r\n}) => {\r\n  const theme = useTheme();\r\n  // User response local state for form (not \"saved\")\r\n  const [response, setResponse] = useState(initialState[question.type]);\r\n  const dispatch = useDispatch();\r\n  // User response store state for \"saved\" user responses\r\n  const userResponses = useSelector(selectUserResponses);\r\n  const userResponse = userResponses[question.id];\r\n\r\n  const inputType =\r\n    question.type === USER_RESPONSE_TYPES.single ? 'radio' : 'checkbox';\r\n\r\n  const handleChange = e => {\r\n    const handler = changeHandlers[question.type];\r\n    const nextValue = handler(e, response);\r\n    setResponse(nextValue);\r\n  };\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    dispatch(setUserResponse({ id: question.id, response }));\r\n  };\r\n\r\n  const validateResponse = responseValidators[question.type];\r\n\r\n  const quizComplete = useSelector(selectQuizCompletionStatus);\r\n  const goToMap = () => dispatch(setScreen({ screenType: SCREEN_TYPES.map }));\r\n  const goToScore = () =>\r\n    dispatch(setScreen({ screenType: SCREEN_TYPES.score }));\r\n\r\n  let buttonHandler, backHandler, backCaseStudyHandler, buttonText;\r\n  backHandler = previous;\r\n  backCaseStudyHandler = previousCaseStudy;\r\n  if (quizComplete) {\r\n    // If the entire quiz is finished, button should take user to score (final) page\r\n    buttonHandler = goToScore;\r\n    buttonText = 'Finish';\r\n  } else if (isLastQuestion) {\r\n    // If this case study is finished, check to see if endAction prop exists.\r\n    // If it does, prefer handler and text values from that prop rather than defaults.\r\n    buttonHandler = endAction ? endAction.handler : goToMap;\r\n    buttonText = endAction ? endAction.label : 'Back to map';\r\n  } else {\r\n    // Otherwise just handle showing user next question.\r\n    buttonHandler = next;\r\n    buttonText = 'Next';\r\n  }\r\n\r\n  \r\n\r\n  return (\r\n    <Wrapper>\r\n      <Stack>\r\n        <h4>{question.text}</h4>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <Stack>\r\n            {question.responses.map(response => {\r\n              let bg = 'none';\r\n\r\n              if (userResponse) {\r\n                const answer = ANSWERS[question.id];\r\n\r\n                // If the response is [part of] the correct answer\r\n                if (validateResponse(response.id, answer)) {\r\n                  bg = theme.colors.success;\r\n\r\n                  // If it's not [part of] the correct answer and *is* [part of] the user response\r\n                } else if (validateResponse(response.id, userResponse)) {\r\n                  bg = theme.colors.error;\r\n                }\r\n              }\r\n\r\n              // TODO: do we need to handle checked differently?\r\n              return (\r\n                <Label key={response.id} bg={bg}>\r\n                  <input\r\n                    type={inputType}\r\n                    name={questionNum}\r\n                    value={response.id}\r\n                    onChange={handleChange}\r\n                    disabled={userResponse}\r\n                  />\r\n\r\n                  {response.text}\r\n                </Label>\r\n              );\r\n            })}\r\n\r\n            {!userResponse && (\r\n              <Actions>\r\n                <ArrowButton type=\"submit\">Submit</ArrowButton>\r\n              </Actions>\r\n            )}\r\n          </Stack>\r\n        </form>\r\n\r\n        {userResponse && (\r\n          <Actions>\r\n            <ArrowButton type=\"button\" onClick={buttonHandler}>\r\n              {buttonText}\r\n            </ArrowButton>\r\n          </Actions>\r\n        )}\r\n        {questionNum > 1 && (<Actions>\r\n          <BackButton type=\"button\" onClick={backHandler}>\r\n            Back\r\n          </BackButton>\r\n        </Actions>)}\r\n        {questionNum == 1 && stepIndex > 0 && (<Actions>\r\n          <BackButton type=\"button\" onClick={previousCaseStudy}>\r\n            Back\r\n          </BackButton>\r\n        </Actions>)}\r\n      </Stack>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Question;\r\n","// Bundle all images in this folder so we can reference them dynamically\r\nexport const CASE_STUDY_IMG_CONTEXT = require.context(\r\n  '../assets/img/case-studies'\r\n);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\n\n/*#__PURE__*/\nReact.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"style\", null, \".cls-1{fill:none;}.cls-3{fill:#54c2e8;}\"), /*#__PURE__*/React.createElement(\"clipPath\", {\n  id: \"clip-path\",\n  transform: \"translate(0 0)\"\n}, /*#__PURE__*/React.createElement(\"rect\", {\n  className: \"cls-1\",\n  width: 84.68,\n  height: 96.02\n})));\n\nvar _ref3 =\n/*#__PURE__*/\n\n/*#__PURE__*/\nReact.createElement(\"title\", null, \"Asset 9\");\n\nvar _ref4 =\n/*#__PURE__*/\n\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Layer_2\",\n  \"data-name\": \"Layer 2\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Layer_1-2\",\n  \"data-name\": \"Layer 1\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  className: \"cls-2\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M78.76,23.84C77.59,14.21,68.35,6.9,57,6.9a25,25,0,0,0-6.86.95A23,23,0,0,0,32.37,0C20.28,0,10.45,8.53,10.45,19c0,.52,0,1,.08,1.57C4.05,24,0,30.11,0,36.82c0,10.48,9.84,19,21.93,19a24.26,24.26,0,0,0,11.21-2.68,24.26,24.26,0,0,0,11.21,2.68,24.68,24.68,0,0,0,9.2-1.76,24.72,24.72,0,0,0,9.2,1.76c12.09,0,21.93-8.52,21.93-19a17.74,17.74,0,0,0-5.92-13\",\n  transform: \"translate(0 0)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M20.88,64.52A3.53,3.53,0,0,0,16.1,66l-3,5.64a3.52,3.52,0,0,0,1.45,4.77,3.44,3.44,0,0,0,1.66.42,3.54,3.54,0,0,0,3.12-1.87l3-5.64a3.52,3.52,0,0,0-1.45-4.77\",\n  transform: \"translate(0 0)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M46.35,64.52A3.52,3.52,0,0,0,41.58,66l-3,5.64A3.52,3.52,0,0,0,40,76.38a3.44,3.44,0,0,0,1.66.42,3.54,3.54,0,0,0,3.12-1.87l3-5.64a3.52,3.52,0,0,0-1.45-4.77\",\n  transform: \"translate(0 0)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M67.75,64.52A3.52,3.52,0,0,0,63,66l-3,5.64a3.53,3.53,0,0,0,1.46,4.77,3.4,3.4,0,0,0,1.65.42,3.54,3.54,0,0,0,3.12-1.87l3-5.64a3.53,3.53,0,0,0-1.46-4.77\",\n  transform: \"translate(0 0)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M28.86,83.63a3.53,3.53,0,0,0-4.66,1.78l-2.51,5.64a3.53,3.53,0,1,0,6.44,2.88l2.52-5.64a3.53,3.53,0,0,0-1.79-4.66\",\n  transform: \"translate(0 0)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  className: \"cls-3\",\n  d: \"M55,83.63a3.53,3.53,0,0,0-4.66,1.78l-2.51,5.64a3.53,3.53,0,1,0,6.44,2.88l2.52-5.64A3.53,3.53,0,0,0,55,83.63\",\n  transform: \"translate(0 0)\"\n}))));\n\nvar SvgRainCloud = function SvgRainCloud(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 84.68 96.02\",\n    ref: svgRef\n  }, props), _ref2, title === undefined ? _ref3 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgRainCloud, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/RainCloud.9b8ce049.svg\";\nexport { ForwardRef as ReactComponent };","/** @jsx jsx */\r\nimport React from 'react';\r\nimport { css, jsx } from '@emotion/core';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTheme } from 'emotion-theming';\r\n\r\nimport Stack from '../shared/Stack';\r\nimport { selectWaterMeterFillPercentage } from '../../store/userResponsesSlice';\r\nimport ANSWERS from '../../data/answers';\r\nimport { ReactComponent as RainCloud } from '../../assets/img/RainCloud.svg';\r\n\r\nconst Wrapper = props => (\r\n  <div\r\n    css={theme => css`\r\n      height: 100%;\r\n      width: 100px;\r\n      padding: 0.5rem;\r\n      border-radius: ${theme.borderRadius}px;\r\n      background-color: ${theme.colors.frankBlueDark};\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst BarOuter = props => (\r\n  <div\r\n    css={theme => css`\r\n      flex: 1;\r\n      background-color: ${theme.colors.white};\r\n      width: 100%;\r\n      position: relative;\r\n      /* For MeterMarking components */\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst BarInner = ({ fillPercentage, ...rest }) => (\r\n  <div\r\n    css={theme => css`\r\n      background-color: ${theme.colors.frankBlueLight};\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: ${fillPercentage}%;\r\n      transition: 0.4s height;\r\n    `}\r\n    {...rest}\r\n  />\r\n);\r\n\r\nconst MeterMarking = props => (\r\n  <div\r\n    css={theme => css`\r\n      position: relative;\r\n      height: 4px;\r\n\r\n      &:before,\r\n      &:after {\r\n        content: '';\r\n        height: 100%;\r\n        width: 20px;\r\n        background-color: ${theme.colors.frankBlueLight};\r\n        display: block;\r\n      }\r\n\r\n      &:after {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst WaterMeter = () => {\r\n  const theme = useTheme();\r\n  const fillPercentage = useSelector(selectWaterMeterFillPercentage);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Stack\r\n        css={css`\r\n          display: flex;\r\n          align-items: center;\r\n          flex-direction: column;\r\n          height: 100%;\r\n        `}\r\n      >\r\n        <RainCloud height=\"70px\" width=\"70px\" style={{ display: 'block' }} />\r\n\r\n        <BarOuter>\r\n          {Object.keys(ANSWERS).map((id, i) => {\r\n            // We want one less than the number of questions\r\n            if (i === 0) {\r\n              return null;\r\n            }\r\n\r\n            return <MeterMarking key={id} />;\r\n          })}\r\n\r\n          <BarInner fillPercentage={fillPercentage} />\r\n        </BarOuter>\r\n      </Stack>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default WaterMeter;\r\n","/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core';\r\nimport React from 'react';\r\n\r\nimport WaterMeter from './WaterMeter';\r\n\r\nconst Wrapper = props => (\r\n  <div\r\n    css={theme => css`\r\n      height: 100%;\r\n      width: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Header = props => (\r\n  <div\r\n    css={css`\r\n      padding: 1rem;\r\n      padding-bottom: 0;\r\n      display: flex;\r\n      align-items: center;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Content = props => (\r\n  <div\r\n    css={css`\r\n      flex: 1;\r\n      position: relative;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst ContentInner = props => (\r\n  <div\r\n    css={css`\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      display: flex;\r\n      padding: 1rem;\r\n\r\n      > * + * {\r\n        margin-left: 1rem;\r\n      }\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Layout = ({ header, left, right, wrapperStyle = {} }) => {\r\n  return (\r\n    <Wrapper style={wrapperStyle}>\r\n      {header && (\r\n        <Header>\r\n          <h2>{header}</h2>\r\n        </Header>\r\n      )}\r\n      <Content>\r\n        <ContentInner>\r\n          {left}\r\n          {right}\r\n          <WaterMeter />\r\n        </ContentInner>\r\n      </Content>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","/** @jsx jsx */\r\nimport React, { useState } from 'react';\r\nimport { jsx, css } from '@emotion/core';\r\nimport { useTheme } from 'emotion-theming';\r\n\r\nimport Stack from '../shared/Stack';\r\nimport Question from './components/Question';\r\nimport CASE_STUDIES from '../../data/caseStudies';\r\nimport { MEDIA_TYPES, DATA_SOURCE_TYPES } from '../../const';\r\nimport { CASE_STUDY_IMG_CONTEXT } from '../../const/caseStudyImgContext';\r\nimport Layout from '../shared/Layout';\r\n\r\nexport const iframeTestId = 'case-study-iframe';\r\n\r\nconst FlexItem = props => (\r\n  <div\r\n    css={css`\r\n      flex: 1;\r\n      position: relative;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Scrollable = props => (\r\n  <div\r\n    css={css`\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      overflow-y: auto;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst CaseStudy = ({ caseStudyId, endAction, previousCaseStudy, stepIndex }) => {\r\n  const theme = useTheme();\r\n  const [questionIdx, setQuestionIdx] = useState(0);\r\n  const caseStudy = CASE_STUDIES.byId[caseStudyId];\r\n  const currentQuestion = caseStudy.questions[questionIdx];\r\n\r\n  return (\r\n    <Layout\r\n      header={caseStudy.title}\r\n      wrapperStyle={{\r\n        color: theme.colors.white,\r\n        backgroundColor: theme.colors.frankBlueDark\r\n      }}\r\n      left={\r\n        <FlexItem style={{ color: theme.colors.white }}>\r\n          <Scrollable>\r\n            <Stack>\r\n              {caseStudy.media.map((media, i) => {\r\n                let dataSourceEl;\r\n\r\n                if (media.dataSource.type === DATA_SOURCE_TYPES.text) {\r\n                  dataSourceEl = media.dataSource.value;\r\n                }\r\n\r\n                if (media.dataSource.type === DATA_SOURCE_TYPES.link) {\r\n                  dataSourceEl = (\r\n                    <a\r\n                      href={media.dataSource.value}\r\n                      css={theme => css`\r\n                        color: ${theme.colors.white};\r\n                        word-wrap: break-word;\r\n                      `}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                    >\r\n                      {media.dataSource.value}\r\n                    </a>\r\n                  );\r\n                }\r\n\r\n                return (\r\n                  <>\r\n                    <img\r\n                      key={`${caseStudyId}-media-${i}`}\r\n                      css={css`\r\n                        width: 100%;\r\n                      `}\r\n                      src={CASE_STUDY_IMG_CONTEXT(`./${media.filename}`)}\r\n                      alt={media.alt}\r\n                    />\r\n\r\n                    <p\r\n                      css={css`\r\n                        font-size: 0.875rem;\r\n                      `}\r\n                    >\r\n                      <em>Source: {dataSourceEl}</em>\r\n                    </p>\r\n                  </>\r\n                );\r\n              })}\r\n\r\n              {caseStudy.backgroundText}\r\n            </Stack>\r\n          </Scrollable>\r\n        </FlexItem>\r\n      }\r\n      right={\r\n        <FlexItem>\r\n          {/* See GlobalStep/index.js for info on key prop */}\r\n          <Question\r\n            key={currentQuestion.id}\r\n            question={currentQuestion}\r\n            questionNum={questionIdx + 1}\r\n            next={() => setQuestionIdx(questionIdx + 1)}\r\n            previous={questionIdx > 0 && (() => setQuestionIdx(questionIdx - 1))}\r\n            isLastQuestion={questionIdx === caseStudy.questions.length - 1}\r\n            endAction={endAction}\r\n            previousCaseStudy={previousCaseStudy}\r\n            stepIndex={stepIndex}\r\n          />\r\n        </FlexItem>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default CaseStudy;\r\n","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport CaseStudy from '../CaseStudy';\r\nimport CASE_STUDIES from '../../data/caseStudies';\r\nimport { SCREEN_TYPES } from '../../const';\r\nimport { setScreen } from '../../store/screenSlice';\r\n\r\nconst STEPS = CASE_STUDIES.ids.slice(0, 3);\r\n\r\nconst GlobalStep = () => {\r\n  const dispatch = useDispatch();\r\n  const [stepIndex, setStepIndex] = useState(0);\r\n\r\n  const step = STEPS[stepIndex];\r\n  const isLastStep = stepIndex === STEPS.length - 1;\r\n\r\n  const endAction = {\r\n    handler: () => {\r\n      if (isLastStep) {\r\n        dispatch(setScreen({ screenType: SCREEN_TYPES.map }));\r\n      }\r\n\r\n      setStepIndex(stepIndex + 1);\r\n    },\r\n    label: isLastStep ? 'Go to map' : 'Next'\r\n  };\r\n\r\n  const previousCaseStudy = () => {\r\n    console.log(\"clicked\");\r\n    setStepIndex(stepIndex - 1);\r\n  };\r\n\r\n  // N.B. key is used here so that we tear down case study in between each change\r\n  // We don't want to use the same mounted component as it means resetting internal state when\r\n  // caseStudyId changes, which allows for a single render in which things can fall out of sync.\r\n  // TODO: investigate to see if there's a better way to handle this.\r\n  return <CaseStudy key={step} caseStudyId={step} endAction={endAction} previousCaseStudy={previousCaseStudy} stepIndex={stepIndex} />;\r\n};\r\n\r\nexport default GlobalStep;\r\n","/** @jsx jsx */\r\nimport React, { useState, createRef } from 'react';\r\nimport { css, jsx } from '@emotion/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Map as LeafletMap, TileLayer, Marker } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport bbox from '@turf/bbox';\r\n\r\nimport CASE_STUDIES from '../../data/caseStudies';\r\nimport { setScreen } from '../../store/screenSlice';\r\nimport { SCREEN_TYPES } from '../../const';\r\nimport { selectCompletedCaseStudies } from '../../store/userResponsesSlice';\r\nimport { MARKER_IMG_CONTEXT } from '../../const/markerImgContext';\r\n\r\nconst Wrapper = props => (\r\n  <div\r\n    css={theme => css`\r\n      border: 1px solid grey;\r\n      border-radius: ${theme.borderRadius}px;\r\n      height: 100%;\r\n      overflow: hidden;\r\n      position: relative;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Prompt = props => (\r\n  <div\r\n    css={theme => css`\r\n      position: absolute;\r\n      left: 1rem;\r\n      bottom: 1rem;\r\n      padding: 1rem;\r\n      background-color: ${theme.colors.white};\r\n      border-radius: ${theme.borderRadius}px;\r\n      border: 1px solid grey;\r\n      z-index: 999; /* Beat leaflet z-index, consider making a new stacking context */\r\n      width: 320px;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst MapIcon = L.Icon.extend({\r\n  options: {\r\n    iconSize: [24, 24],\r\n    iconAnchor: [12, 24]\r\n  }\r\n});\r\n\r\nconst LOCALISED_CASE_STUDY_IDS = CASE_STUDIES.ids.filter(id => id > 3);\r\n// console.log(LOCALISED_CASE_STUDY_IDS);\r\n\r\n// N.B. map now can't get close to points while keeping everything on screen, since Cape Town\r\nconst getInitialBounds = () => {\r\n  const features = LOCALISED_CASE_STUDY_IDS.map(caseStudyId => {\r\n    const caseStudy = CASE_STUDIES.byId[caseStudyId];\r\n    return {\r\n      type: 'Feature',\r\n      geometry: {\r\n        type: 'Point',\r\n        coordinates: caseStudy.mapInfo.coordinates\r\n      }\r\n    };\r\n  });\r\n\r\n  const geoJson = {\r\n    type: 'FeatureCollection',\r\n    features\r\n  };\r\n\r\n  const [minX, minY, maxX, maxY] = bbox(geoJson);\r\n  return [\r\n    [minX, minY],\r\n    [maxX, maxY]\r\n  ];\r\n};\r\n\r\nconst initialBounds = getInitialBounds();\r\n// console.log(initialBounds);\r\n\r\n// Get all pins in view\r\n// const initialBounds = [\r\n//   [-55.7765730186677, -119.417931],\r\n//   [55.378052, 85.40521]\r\n// ];\r\n\r\n// const initialBounds = [\r\n//   [-26.588527147308625, -125.15625000000001],\r\n//   [58.81374171570782, 91.05468750000001]\r\n// ];\r\n\r\nconst mapRef = createRef();\r\n\r\nconst Map = () => {\r\n  const [selectedCaseStudy, setSelectedCaseStudy] = useState(null);\r\n  const dispatch = useDispatch();\r\n  const completedCaseStudies = useSelector(selectCompletedCaseStudies);\r\n\r\n  const handleClick = (caseStudyId, coordinates) => {\r\n    setSelectedCaseStudy(caseStudyId);\r\n    mapRef.current.leafletElement.flyTo(coordinates, 10);\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      {!selectedCaseStudy && (\r\n        <Prompt>\r\n          Click the icons to find out how the water crisis affects different\r\n          countries\r\n        </Prompt>\r\n      )}\r\n\r\n      <LeafletMap\r\n        ref={mapRef}\r\n        bounds={initialBounds}\r\n        boundsOptions={{\r\n          maxZoom: 22\r\n        }}\r\n        style={{ height: '100%' }}\r\n        dragging={false}\r\n        zoomControl={false}\r\n        scrollWheelZoom={false}\r\n        doubleClickZoom={false}\r\n        keyboard={false}\r\n        useFlyTo={true}\r\n        // onClick={e => {\r\n        //   console.log(e);\r\n        // }}\r\n        // ondragend={e => {\r\n        //   console.log(e.target.getBounds());\r\n        // }}\r\n        onzoomend={e => {\r\n          console.log(e.target.getBounds());\r\n\r\n          if (selectedCaseStudy !== null) {\r\n            // Once zoom animation has ended, navigate to case study page\r\n            setTimeout(() => {\r\n              dispatch(\r\n                setScreen({\r\n                  screenType: SCREEN_TYPES.caseStudy,\r\n                  screenProps: { caseStudyId: selectedCaseStudy }\r\n                })\r\n              );\r\n            }, 800); // Small delay before navigation\r\n          }\r\n        }}\r\n      >\r\n        <TileLayer\r\n          url=\"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png\"\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n          // noWrap={true}\r\n        />\r\n        {LOCALISED_CASE_STUDY_IDS.map(id => {\r\n          const { markerImgs, coordinates } = CASE_STUDIES.byId[id].mapInfo;\r\n          const isComplete = completedCaseStudies[id];\r\n          // If case study is complete, change marker image and remove click handler\r\n          const markerImg = isComplete\r\n            ? markerImgs.completed\r\n            : markerImgs.regular;\r\n          /*const onClick = isComplete\r\n            ? undefined\r\n            : () => handleClick(id, coordinates);*/\r\n          const onClick = () => handleClick(id, coordinates);\r\n          return (\r\n            <Marker\r\n              onClick={onClick}\r\n              position={coordinates}\r\n              key={id}\r\n              icon={\r\n                new MapIcon({ iconUrl: MARKER_IMG_CONTEXT(`./${markerImg}`) })\r\n              }\r\n            />\r\n          );\r\n        })}\r\n      </LeafletMap>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default Map;\r\n","// this comment tells babel to convert jsx to calls to a function called jsx instead of React.createElement\r\n/** @jsx jsx */\r\nimport React from 'react';\r\nimport frankWaterLogo from '../../assets/img/frankWaterLogo.png';\r\nimport { css, jsx } from '@emotion/core';\r\n\r\nconst Page = props => {\r\n  return (\r\n    <div\r\n      css={css`\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100vh;\r\n      `}\r\n    >\r\n      <header\r\n        css={css`\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: space-between;\r\n          padding: 1.5rem;\r\n        `}\r\n      >\r\n        <h1\r\n          css={theme => css`\r\n            font-size: 2.5rem;\r\n            color: ${theme.colors.frankBlueLight};\r\n          `}\r\n        >\r\n          Water for the World\r\n        </h1>\r\n        <img\r\n          alt=\"Frank Water logo\"\r\n          src={frankWaterLogo}\r\n          css={css`\r\n            height: 50px;\r\n          `}\r\n        />\r\n      </header>\r\n      <div\r\n        css={theme => css`\r\n          flex: 1;\r\n          position: relative;\r\n          margin: 1.5rem;\r\n          margin-top: 0;\r\n          overflow: hidden;\r\n          border-radius: ${theme.borderRadius}px;\r\n        `}\r\n      >\r\n        {props.children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n","/** @jsx jsx */\r\nimport { jsx, css } from '@emotion/core';\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Layout from '../shared/Layout';\r\nimport Stack from '../shared/Stack';\r\nimport { selectCurrentScore } from '../../store/userResponsesSlice';\r\nimport ANSWERS from '../../data/answers';\r\nimport ArrowButton from '../shared/ArrowButton';\r\nimport { useTheme } from 'emotion-theming';\r\nimport conclusionPhoto from '../../assets/img/12_Conclusion-crop.jpg';\r\n\r\nconst FlexItem = props => (\r\n  <div\r\n    css={css`\r\n      flex: 1;\r\n      position: relative;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Scrollable = props => (\r\n  <div\r\n    css={css`\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      overflow-y: auto;\r\n    `}\r\n    {...props}\r\n  />\r\n);\r\n\r\nconst Score = () => {\r\n  const userScore = useSelector(selectCurrentScore);\r\n  const theme = useTheme();\r\n  return (\r\n    <Layout\r\n      header=\"Congratulations, you have completed the quiz and helped to\r\n                achieve a water-secure future!\"\r\n      wrapperStyle={{\r\n        border: '1px solid grey',\r\n        borderRadius: theme.borderRadius,\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n        color: theme.colors.white,\r\n        backgroundColor: theme.colors.frankBlueDark\r\n      }}\r\n      left={\r\n        <FlexItem>\r\n          <img\r\n            css={css`\r\n              height: 98%;\r\n              width: 100%;\r\n              display: block;\r\n            `}\r\n            src={conclusionPhoto}\r\n            alt=\"Young girl drinking from a clean and safe water supply near her house\"\r\n          />\r\n          <p\r\n            css={css`\r\n              font-size: 0.875rem;\r\n            `}\r\n          >\r\n            <em>Source: Frank Water</em>\r\n          </p>\r\n        </FlexItem>\r\n      }\r\n      right={\r\n        <FlexItem\r\n          css={theme => css`\r\n            background-color: ${theme.colors.frankBlueLight};\r\n          `}\r\n        >\r\n          <Scrollable\r\n            css={css`\r\n              padding: 1rem;\r\n            `}\r\n          >\r\n            <Stack\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n              `}\r\n            >\r\n              <p>\r\n                We hope that this interactive quiz has helped you to increase\r\n                your knowledge about Water Sanitation and Hygiene (WASH).\r\n              </p>\r\n\r\n              <p>\r\n                Frank Water’s vision is of a water-secure world, in which everyone, everywhere has access to a safe, resilient source of water. \r\n                To achieve this vision, Frank Water works overseas (in some of the places have been mentioned in the questions) and in the UK. \r\n                Its UK programme focus on education and behaviour change; encouraging consumers away from products, \r\n                practices and processes that have a negative impact on global water resources.\r\n              </p>\r\n              <p>\r\n                Activities include workshops in schools and at festivals to educate and inform the next generation of water activists and campaigners, \r\n                and the Frank Water Refill Service which serves tap water at events and festivals and in restaurants and cafes, \r\n                helping reduce waste and empower individuals to make positive change in their everyday lives.\r\n              </p>\r\n\r\n              <p>\r\n                To find out more about Frank Water and how you can get involved,\r\n                head to{' '}\r\n                <a href=\"https://www.frankwater.com\">\r\n                  https://www.frankwater.com\r\n                </a>\r\n              </p>\r\n\r\n              <h3>Your Results</h3>\r\n\r\n              <p>\r\n                <strong>\r\n                  {userScore} / {Object.keys(ANSWERS).length}\r\n                </strong>\r\n              </p>\r\n            </Stack>\r\n          </Scrollable>\r\n        </FlexItem>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default Score;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Home from './Home';\r\nimport GlobalStep from './GlobalStep';\r\nimport Map from './Map';\r\nimport CaseStudy from './CaseStudy';\r\nimport Page from './shared/Page';\r\nimport Score from './Score';\r\nimport { SCREEN_TYPES } from '../const';\r\nimport { selectScreen } from '../store/screenSlice';\r\n\r\nconst screens = {\r\n  [SCREEN_TYPES.home]: Home,\r\n  [SCREEN_TYPES.globalStep]: GlobalStep,\r\n  [SCREEN_TYPES.map]: Map,\r\n  [SCREEN_TYPES.caseStudy]: CaseStudy,\r\n  [SCREEN_TYPES.score]: Score\r\n};\r\n\r\nconst Fallback = () => <div>Not implemented</div>;\r\n\r\nconst App = () => {\r\n  const { screenType, screenProps } = useSelector(selectScreen);\r\n\r\n  const ScreenComponent = screens[screenType] || Fallback;\r\n\r\n  return (\r\n    <Page>\r\n      <ScreenComponent {...screenProps} />\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\n\r\nimport screenReducer from './screenSlice';\r\nimport userResponsesReducer from './userResponsesSlice';\r\n\r\nconst store = configureStore({\r\n  reducer: {\r\n    screen: screenReducer,\r\n    userResponses: userResponsesReducer\r\n  }\r\n});\r\n\r\nexport default store;\r\n","// TODO: consider space scale, like styled-system\r\n\r\nexport default {\r\n  colors: {\r\n    white: '#fff',\r\n    frankBlueLight: '#53C2E8',\r\n    frankBlueDark: '#223978',\r\n    success: '#4caf50',\r\n    error: '#f44336'\r\n  },\r\n  borderRadius: 4\r\n};\r\n","import React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { ThemeProvider } from 'emotion-theming';\r\n\r\nimport store from './store';\r\nimport theme from './theme';\r\n\r\nconst AppProviders = ({ children }) => (\r\n  <ThemeProvider theme={theme}>\r\n    <Provider store={store}>{children}</Provider>\r\n  </ThemeProvider>\r\n);\r\n\r\nexport default AppProviders;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\n\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport AppProviders from './AppProviders';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <AppProviders>\r\n    <App />\r\n  </AppProviders>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}